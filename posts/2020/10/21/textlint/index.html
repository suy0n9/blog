<!doctype html><html xmlns=http://www.w3.org/1999/xhtml lang=ja-jp><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>textlintで日本語をチェックする | suy0n9.com</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=https://suy0n9.com/css/custom.css><link rel=icon type=image/png ref=/favicon.ico><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://suy0n9.com/posts/2020/10/21/textlint/><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"></head><body><section class=section><div class=container><nav id=nav-main class=nav><div id=nav-name class=nav-left><a id=nav-anchor class=nav-item href=https://suy0n9.com><h1 id=nav-heading class="title is-4">suy0n9.com</h1></a></div><div class=nav-right><nav id=nav-items class="nav-item level is-mobile"><a class=level-item aria-label=github href=https://github.com/suy0n9 target=_blank rel=noopener><span class=icon><i><svg viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></i></span></a><a class=level-item aria-label=twitter href=https://twitter.com/suy0n9 target=_blank rel=noopener><span class=icon><i><svg viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></i></span></a></nav></div></nav></div><script src=/js/navicon-shift.js></script></section><section class=section><div class=container><h1 class=title>textlintで日本語をチェックする</h1><h2 class="subtitle is-6">October 21, 2020</h2><div class="subtitle tags is-6"><a class="subtitle is-6" href=/tags/textlint/>#textlint</a>
| <a class="subtitle is-6" href=/tags/vim/>#vim</a></div><div class=content><p>Markdownでブログを書く際に日本語の間違いやtypoをチェックできるようにtextlintを導入した．</p><h2 id=textlintとは>textlintとは</h2><p>テキストやMarkdownに書かれた自然言語文章をルールに従ってチェックしてくれるツール．</p><p><a href=https://github.com/textlint/textlint>textlint/textlint</a></p><h2 id=インストールと設定>インストールと設定</h2><p>textlintとルールプリセットをglobalオプションでインストール．</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ npm install -g <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>textlint <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>textlint-rule-preset-ja-technical-writing <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>textlint-rule-spellcheck-tech-word
</code></pre></div><p>そのままだとルールが適用されないので<code>.textlintrc</code>を用意する．今回使用したプリセットルールは以下．</p><ul><li><a href=https://github.com/textlint-ja/textlint-rule-preset-ja-technical-writing>preset-ja-technical-writing</a></li><li><a href=https://github.com/azu/textlint-rule-spellcheck-tech-word>textlint-rule-spellcheck-tech-word</a></li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ cat ~/.textlintrc
<span style=color:#f92672>{</span>
    <span style=color:#e6db74>&#34;rules&#34;</span>: <span style=color:#f92672>{</span>
        <span style=color:#e6db74>&#34;preset-ja-technical-writing&#34;</span>: <span style=color:#f92672>{</span>
            <span style=color:#e6db74>&#34;sentence-length&#34;</span>: <span style=color:#f92672>{</span>
                max: <span style=color:#ae81ff>140</span>
            <span style=color:#f92672>}</span>,
            <span style=color:#e6db74>&#34;ja-no-mixed-period&#34;</span>: <span style=color:#f92672>{</span>
                <span style=color:#e6db74>&#34;allowPeriodMarks&#34;</span>: <span style=color:#f92672>[</span><span style=color:#e6db74>&#34;．&#34;</span><span style=color:#f92672>]</span>
            <span style=color:#f92672>}</span>
        <span style=color:#f92672>}</span>,
        <span style=color:#e6db74>&#34;textlint-rule-spellcheck-tech-word&#34;</span>: true
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><p><code>preset-ja-technical-writing</code>では技術文書向けのルールが複数内包されている．
READMEにも書いてあるがデフォルトでは厳しめのルールになっているため，個別に<code>sentence-length</code>を140文字まで許容，<code>ja-no-mixed-period</code>での文末の句読点を<code>。</code>に加えて<code>．</code>も許容する設定にした。</p><h2 id=vimで非同期にtextlintする>Vimで非同期にtextlintする</h2><p>Vim プラグインマネージャーは<a href=https://github.com/junegunn/vim-plug>junegunn/vim-plug</a>を，Lint エンジンに<a href=https://github.com/dense-analysis/ale>dense-analysis/ale</a>を使用している．</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-.vimrc data-lang=.vimrc><span style=color:#75715e>&#34;.vimrcから抜粋</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span><span style=color:#75715e>&#34; vim-plugでのインストール </span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#a6e22e>Plug</span> <span style=color:#e6db74>&#39;w0rp/ale&#39;</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#75715e>
</span><span style=color:#75715e>&#34; ale linterの設定</span><span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>g</span>:<span style=color:#a6e22e>ale_linters</span> = {<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>\   <span style=color:#e6db74>&#39;markdown&#39;</span>: [<span style=color:#e6db74>&#39;textlint&#39;</span>]<span style=color:#960050;background-color:#1e0010>
</span><span style=color:#960050;background-color:#1e0010></span>\}<span style=color:#960050;background-color:#1e0010>
</span></code></pre></div><p>これでMarkdownの文章を非同期チェックできるようになった．</p></div></div></section><section class=section><div class="container has-text-centered"><a href=https://suy0n9.com>Home</a><p>&copy; suy0n9 All Right Reserved.</p></div></section><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-103680121-3','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>